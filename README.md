# Розрахунково-графічна робота з дисципліни "Бази Даних"

## "Створення додатку бази даних, орієнтованого на взаємодію з СУБД PostgreSQL"

---

**Виконав:** Фізик Назар  
**Група:** КВ-34  
**Варіант:** Електронний довідник медичних препаратів  
**Telegram:** @PtahaF

---

## Про проект

Цей проект є консольним додатком, розробленим на Python, для взаємодії з базою даних PostgreSQL. Метою роботи є здобуття вмінь програмування прикладних додатків баз даних.

Додаток реалізує повний CRUD-функціонал для 4-х таблиць бази даних "Електронний довідник медичних препаратів", а також функції пакетної генерації даних та комплексного пошуку. Програмний код організовано згідно шаблону MVC (Model-View-Controller).

## Структура Бази Даних

База даних описує довідник медичних препаратів, їх виробників та діючі речовини.

**Сутності (Таблиці):**
* **`Manufacturers` (Виробники):** Зберігає інформацію про компанії-виробники.
* **`ActiveSubstances` (Діючі Речовини):** Довідник діючих речовин, які є основою препаратів.
* **`Preparations` (Препарати):** Інформація про конкретні торгові назви ліків, їх форму та умови зберігання.
* **`PreparationComposition` (Склад):** Асоціативна таблиця (N:M) для зв'язку `Preparations` та `ActiveSubstances`, містить атрибут `dosage` (дозування).

**Зв'язки:**
* `Manufacturers` **1:N** `Preparations`
* `Preparations` **N:M** `ActiveSubstances` (реалізовано через `PreparationComposition`)

## Функціонал програми

Програма реалізує всі основні вимоги РГР через консольне меню.

### 1. Повний CRUD (Create, Read, Update, Delete)
Реалізовано для всіх 4-х таблиць:
* Керування "Виробниками"
* Керування "Діючими Речовинами"
* Керування "Препаратами" (з контролем зовнішнього ключа `manufacturer_id`)
* Керування "Складом препаратів" (N:M)

### 2. Контроль цілісності даних
Програма коректно обробляє обмеження зовнішніх ключів:
* **Блокування видалення батьківських записів:** Неможливо видалити виробника, якщо за ним закріплені препарати.
* **Блокування вставки "записів-сиріт":** Неможливо додати препарат з неіснуючим `manufacturer_id`.

### 3. Пакетна генерація даних
* Реалізовано автоматичну генерацію N-кількості випадкових, але валідних даних засобами SQL (`generate_series()`, `random()`).
* Генерація враховує зовнішні ключі, обираючи випадкові існуючі ID з батьківських таблиць.

### 4. Комплексний пошук (3 запити)
Реалізовано підменю для складного пошуку даних:
* **Запит 1:** Пошук виробників за країною (LIKE), формою препарату (=) та кількістю препаратів (`GROUP BY`, `HAVING`).
* **Запит 2:** Пошук речовин за діапазоном температур зберігання (з аналізом текстового поля `storage_conditions` за допомогою `regexp_replace`).
* **Запит 3:** Пошук препаратів за описом речовин, що входять до їх складу (`JOIN` через 3 таблиці).

### 5. Додаткові функції
* **Вимірювання часу:** Автоматичний розрахунок та виведення часу виконання для кожного пошукового запиту в мілісекундах.
* **Очищення БД:** Функція повного очищення всіх таблиць (`TRUNCATE ... RESTART IDENTITY CASCADE`).

---

## Технології та бібліотеки

* **Мова:** Python 3.12
* **СУБД:** PostgreSQL (v15-17)
* **Драйвер:** `psycopg` (v3)
* **Стандартні бібліотеки:** `time` (для вимірювання часу)

---